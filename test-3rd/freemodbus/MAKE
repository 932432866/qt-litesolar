
 # ../../3rd/freemodbus/modbus/ascii/mbascii.c \
 # ../../3rd/freemodbus/modbus/rtu/mbcrc.c \
 # ../../3rd/freemodbus/modbus/rtu/mbrtu.c \
 #CCOPTS += -I../../3rd/freemodbus/modbus/rtu
 #CCOPTS += -I../../3rd/freemodbus/PortSerial
 #CCOPTS += -I../../3rd/freemodbus/modbus/ascii

DEMO_SOURCES = ../../3rd/freemodbus/demo.cpp
MODBUS_SOURCES = ../../3rd/freemodbus/modbus/mb.c \
 ../../3rd/freemodbus/modbus/functions/mbfunccoils.c \
 ../../3rd/freemodbus/modbus/functions/mbfuncdiag.c \
 ../../3rd/freemodbus/modbus/functions/mbfuncdisc.c \
 ../../3rd/freemodbus/modbus/functions/mbfuncholding.c \
 ../../3rd/freemodbus/modbus/functions/mbfuncinput.c \
 ../../3rd/freemodbus/modbus/functions/mbfuncother.c \
 ../../3rd/freemodbus/modbus/functions/mbutils.c \
 ../../3rd/freemodbus/modbus/tcp/mbtcp.c
PORT_SERIAL_SOURCES = ../../3rd/freemodbus/PortSerial/portevent.c \
 ../../3rd/freemodbus/PortSerial/portother.c \
 ../../3rd/freemodbus/PortSerial/portserial.c \
 ../../3rd/freemodbus/PortSerial/porttimer.c
PORT_TCP_SOURCES = ../../3rd/freemodbus/PortTcp/portevent.c \
 ../../3rd/freemodbus/PortTcp/portother.c \
 ../../3rd/freemodbus/PortTcp/porttcp.c


# Compiler options are quite flexible.  GCC versions have a significant impact
# on the size of -Os code, e.g. gcc-4.6 is much worse than gcc-4.5.

CC	= gcc
# -Wall -std=c99
CCOPTS	= -Os -pedantic -fstrict-aliasing -fomit-frame-pointer -static
CCOPTS += -I../../3rd/freemodbus/modbus
CCOPTS += -I../../3rd/freemodbus/modbus/include
CCOPTS += -I../../3rd/freemodbus/modbus/tcp
CCOPTS += -I../../3rd/freemodbus/PortTcp

CCLIBS	= -lm -lWs2_32
DEFINES =

# If you want a 32-bit build on a 64-bit host
#CCOPTS += -m32

# For debugging, use -O0 -g -ggdb, and don't add -fomit-frame-pointer

# -fexec-charset=GBK
# -finput-charset=utf8

libmodbus-demo: $(MODBUS_SOURCES) $(DEMO_SOURCES) $(PORT_TCP_SOURCES)
	$(CC) -o $@ $(DEFINES) $(CCOPTS) $(DEMO_SOURCES) $(MODBUS_SOURCES) $(MODBUS_SOURCES) $(PORT_TCP_SOURCES) $(CCLIBS)